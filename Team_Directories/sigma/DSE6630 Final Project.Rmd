---
title: "DSE6630 Final Project"
subtitle: "Merrimack College DSE6630: Healthcare & Life Sciences Analytics"
author: "Ryan Canfield, and Malek Sabri"
date: "30 June 2024"
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
    fig_crop: no
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      cache = FALSE,
                      cache.comments = TRUE,
                      size = 13)
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}
# Cleaning, setting up, and loading packages.
pacman::p_unload(pacman::p_loaded(), character.only = TRUE)
rm(list = ls(all = TRUE))

pacman::p_load(here,
               tidyverse, 
               ggplot2, 
               kableExtra,
               forcats,
               sf,
               tmap,
               tmaptools,
               jsonlite, 
               lubridate, 
               caret,
               glmnet, 
               gbm)

```

```{r}
# Loading in the data file.
OriginDF <- read.csv("MA_COUNTY_CANCER_MORTALITY_RATES_1980_2014.CSV")

# **Note** all the heads should be commented out when knitting to remove extra tables this is just a way to confirm and see if the code is working.
head(OriginDF)

```
# 1 Introduction
## 1.1 Background
This data set shows the mortality rate of each cancer in Massachusetts. It is a record showing the number of deaths by county gender and year. Some of the important variable information is:

__location_name__  -- Is the county that is being measured/recorded.
__FIPS__ -- Is the unique value assigned by the government to identify geographic entities within the U.S..
__cause_name__ -- Is the type of cancer that caused the mortality.
__sex__ -- Is the sex of the patient. (Both is the combination of both the male and female rates).
__year_id__ -- Is the year that is being recorded. the years go from 1980 - 2014.
__mx__ -- Is the number of deaths caused by the cancer in that year.
__upper__ and __lower__ -- Are the upper and lower bounds of mx.

To read this data, we will use an example which can be found on line 106. On that line it says:
In the year 1980 there were an estimation of 305 male deaths due to Neoplasms cancer in Barnstable County	

The first 100 or so rows show the number for the entire state not, not by county so we removed the rose containing data that we didn't need.
```{r}
# Removes data that we didn't need.
df <- OriginDF[-(1:105), ]

head(df)
```
Here we are reading in shape files found on the website below to get the county borders for massachusetts.
[here](https://www.mass.gov/info-details/massgis-data-counties?_gl=1*1atxnmf*_ga*MTAyOTc5ODQ4LjE3MTk2MTk0NDU.*_ga_MCLPEGW7WM*MTcxOTYxOTU2Ny4xLjEuMTcxOTYxOTU3Ni4wLjAuMA..#downloads-) 

```{r}
ma_sf <- read_sf("C:/Users/RRC/Downloads/counties/COUNTIESSURVEY_POLYM.shp") 
ma_sf$geometry

```

Reading in the shape file and looking at the geometry of it as well.

```{r, fig.height=3, fig.width=3}
# Initiate the plot and tell it the data set
ggplot(ma_sf) +
  # Use the geom_sf function to tell it how to make the map
  geom_sf() +
  # Set the theme to classic
  theme_classic() +
  # Let's give it a title
  ggtitle("Massachusetts")

```
## 1.2 Questions to examine 

1. Based on the data we have we can look at most most common cancer mortalities in the three counties with the lowest income compared to the highest income (look at incomes online ) and map then to compare. after finding results we can come pair either hospital numbers or poor insurance due to low income

2. We can use bar graphs and other visuals and aggregate the data to look at highest mortality cancer types between males females and both combined. From here we can come up with a few recommendations like creating more tests to watch out for these types more 

3. ?? maybe something else like seeing trends in mortalities and seeing if any new cancer arises as highest deaths. or try predicitons or regressions maybe like in project three but our data is sevearly lacking so maybe not.

4. quick write up/report explaining our original idea and the data we thought we were going to receive, then getting the actual data and changing our plan to this and what we did with this. 

















